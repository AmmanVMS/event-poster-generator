(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{331:function(t,e,n){var content=n(335);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(107).default)("1b7833da",content,!0,{sourceMap:!1})},333:function(t,e,n){!function(e){"use strict";var n=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var n=e(t).toLowerCase();return(o="application/font-woff",r="image/jpeg",{woff:o,woff2:o,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:r,jpeg:r,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var o,r},dataAsUrl:function(content,t){return"data:"+t+";base64,"+content},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(canvas){return canvas.toBlob?new Promise((function(t){canvas.toBlob(t)})):function(canvas){return new Promise((function(t){for(var e=window.atob(canvas.toDataURL().split(",")[1]),n=e.length,o=new Uint8Array(n),i=0;i<n;i++)o[i]=e.charCodeAt(i);t(new Blob([o],{type:"image/png"}))}))}(canvas)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),base=n.createElement("base");n.head.appendChild(base);var a=n.createElement("a");return n.body.appendChild(a),base.href=e,a.href=t,a.href},getAndEncode:function(t){var e=3e4;return new Promise((function(n){var o=new XMLHttpRequest;function r(){if(4===o.readyState)if(200===o.status){var e=new FileReader;e.onloadend=function(){var content=e.result.split(/,/)[1];n(content)},e.readAsDataURL(o.response)}else c("cannot fetch resource: "+t+", status: "+o.status)}function l(){c("timeout of "+e+"ms occured while fetching resource: "+t)}function c(t){console.error(t),n("")}o.onreadystatechange=r,o.ontimeout=l,o.responseType="blob",o.timeout=e,o.open("GET",t,!0),o.send()}))},uid:(t=0,function(){return"u"+e()+t++;function e(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}),delay:function(t){return function(e){return new Promise((function(n){setTimeout((function(){n(e)}),t)}))}},asArray:function(t){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise((function(e,n){var image=new Image;image.onload=function(){e(image)},image.onerror=n,image.src=t}))},width:function(t){var e=n(t,"border-left-width"),o=n(t,"border-right-width");return t.scrollWidth+e+o},height:function(t){var e=n(t,"border-top-width"),o=n(t,"border-bottom-width");return t.scrollHeight+e+o}};var t;function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function n(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),o=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,n,l){return c()?Promise.resolve(t):Promise.resolve(t).then(o).then((function(e){var o=Promise.resolve(t);return e.forEach((function(t){o=o.then((function(e){return r(e,t,n,l)}))})),o}));function c(){return!e(t)}},shouldProcess:e,impl:{readUrls:o,inline:r}};function e(e){return-1!==e.search(t)}function o(e){for(var o,r=[];null!==(o=t.exec(e));)r.push(o[1]);return r.filter((function(t){return!n.isDataUrl(t)}))}function r(t,e,o,r){return Promise.resolve(e).then((function(t){return o?n.resolveUrl(t,o):t})).then(r||n.getAndEncode).then((function(data){return n.dataAsUrl(data,n.mimeType(e))})).then((function(o){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}(e),"$1"+o+"$3")}))}}(),r=function(){return{resolveAll:function(){return t(document).then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))},impl:{readAll:t}};function t(){return Promise.resolve(n.asArray(document.styleSheets)).then((function(t){var e=[];return t.forEach((function(t){try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}})),e})).then((function(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return o.shouldProcess(t.style.getPropertyValue("src"))}))})).then((function(e){return e.map(t)}));function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return o.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),l=function(){return{inlineAll:function e(r){return r instanceof Element?l(r).then((function(){return r instanceof HTMLImageElement?t(r).inline():Promise.all(n.asArray(r.childNodes).map((function(t){return e(t)})))})):Promise.resolve(r);function l(t){var e=t.style.getPropertyValue("background");return e?o.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}},impl:{newImage:t}};function t(element){return{inline:function(t){return n.isDataUrl(element.src)?Promise.resolve():Promise.resolve(element.src).then(t||n.getAndEncode).then((function(data){return n.dataAsUrl(data,n.mimeType(element.src))})).then((function(t){return new Promise((function(e,n){element.onload=e,element.onerror=n,element.src=t}))}))}}}}(),c={toSvg:f,toPng:function(t,e){return h(t,e||{}).then((function(canvas){return canvas.toDataURL()}))},toJpeg:function(t,e){return h(t,e=e||{}).then((function(canvas){return canvas.toDataURL("image/jpeg",e.quality||1)}))},toBlob:function(t,e){return h(t,e||{}).then(n.canvasToBlob)},toPixelData:function(t,e){return h(t,e||{}).then((function(canvas){return canvas.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data}))},impl:{fontFaces:r,images:l,util:n,inliner:o}};function f(t,e){return e=e||{},Promise.resolve(t).then((function(t){return m(t,e.filter,!0)})).then(v).then(d).then((function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach((function(n){t.style[n]=e.style[n]}));return t})).then((function(o){return function(t,e,o){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(n.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(foreignObject){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+o+'">'+foreignObject+"</svg>"})).then((function(svg){return"data:image/svg+xml;charset=utf-8,"+svg}))}(o,e.width||n.width(t),e.height||n.height(t))}))}function h(t,e){return f(t,e).then(n.makeImage).then(n.delay(100)).then((function(image){var canvas=function(t){var canvas=document.createElement("canvas");if(canvas.width=e.width||2*n.width(t),canvas.height=e.height||2*n.height(t),canvas.style.width=n.width(t),canvas.style.height=n.height(t),e.bgcolor){var o=canvas.getContext("2d");o.fillStyle=e.bgcolor,o.fillRect(0,0,canvas.width,canvas.height)}return canvas}(t),o=canvas.getContext("2d");return o.scale(2,2),o.drawImage(image,0,0),canvas}))}function m(t,filter,e){return e||!filter||filter(t)?Promise.resolve(t).then((function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)})).then((function(e){return function(t,e,filter){var o=t.childNodes;return 0===o.length?Promise.resolve(e):r(e,n.asArray(o),filter).then((function(){return e}));function r(t,e,filter){var n=Promise.resolve();return e.forEach((function(e){n=n.then((function(){return m(e,filter)})).then((function(e){e&&t.appendChild(e)}))})),n}}(t,e,filter)})).then((function(e){return function(t,e){return e instanceof Element?Promise.resolve().then(o).then(r).then(l).then(c).then((function(){return e})):e;function o(){function o(source,t){function e(source,t){n.asArray(source).forEach((function(e){t.setProperty(e,source.getPropertyValue(e),source.getPropertyPriority(e))}))}source.cssText?t.cssText=source.cssText:e(source,t)}o(window.getComputedStyle(t),e.style)}function r(){function o(element){var style=window.getComputedStyle(t,element),content=style.getPropertyValue("content");if(""!==content&&"none"!==content){var o=n.uid();e.className=e.className+" "+o;var r=document.createElement("style");r.appendChild(l(o,element,style)),e.appendChild(r)}function l(t,element,style){var e="."+t+":"+element,o=style.cssText?r(style):l(style);return document.createTextNode(e+"{"+o+"}");function r(style){var content=style.getPropertyValue("content");return style.cssText+" content: "+content+";"}function l(style){return n.asArray(style).map(t).join("; ")+";";function t(t){return t+": "+style.getPropertyValue(t)+(style.getPropertyPriority(t)?" !important":"")}}}}[":before",":after"].forEach((function(element){o(element)}))}function l(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function c(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)})))}}(t,e)})):Promise.resolve()}function v(t){return r.resolveAll().then((function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t}))}function d(t){return l.inlineAll(t).then((function(){return t}))}t.exports=c}()},334:function(t,e,n){"use strict";n(331)},335:function(t,e,n){var o=n(106),r=n(225),l=n(336),c=n(337),f=n(338),h=o(!1),m=r(l),v=r(c),d=r(f);h.push([t.i,'@font-face{font-family:"Open Sans";font-style:normal;font-weight:700;src:url('+m+') format("truetype")}@font-face{font-family:"Open Sans";font-style:normal;font-weight:400;src:url('+v+') format("truetype")}@font-face{font-family:"SourceHanSerifSC";font-style:normal;font-weight:300;src:url('+d+') format("opentype")}h1{margin-bottom:15px;font-size:20px;font-family:"SourceHanSerifSC","Open Sans"}.poster-container{position:absolute;left:0;right:0;top:0;bottom:0;font-family:"Open Sans"}#poster-preview{position:relative;width:-webkit-max-content;width:-moz-max-content;width:max-content;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.poster-template{height:100vh}.poster-content{position:absolute;left:0;right:0;top:0;bottom:0;padding:37vh 3vh 0;text-align:center;color:#fff;font-size:1vh}.author-img{position:absolute;z-index:-10}.title{font-weight:400}.name,.title{color:#ffe342}.name{margin:0 0 .5vh;font-family:"SourceHanSerifSC","Open Sans";font-size:3.7vh}.topic{margin-bottom:.5vh;font-size:2.3vh;font-weight:700}.time{font-size:.9vh;color:#ccc}.keynote{display:block;margin:.5vh auto;height:5vh}.el-form-item{margin-bottom:5px}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#409eff}.avatar-icon{font-size:22px;color:#ccc;width:40px;height:40px;line-height:44px;text-align:center}.el-upload:hover .avatar-icon,a:hover .avatar-icon{color:#409eff}.avatar{width:40px;height:40px;display:block}.info,.info a{color:#aaa}',""]),t.exports=h},336:function(t,e,n){t.exports=n.p+"fonts/OpenSans-Bold.dbb97fd.ttf"},337:function(t,e,n){t.exports=n.p+"fonts/OpenSans-Light.ed41bed.ttf"},338:function(t,e,n){t.exports=n.p+"fonts/SourceHanSerifSC-Heavy.8a4275a.otf"},341:function(t,e,n){"use strict";n.r(e);n(41),n(16),n(27),n(34),n(224);var o=n(0),r=n(333),l=n.n(r),c=o.default.extend({data:function(){return{imageUrl:null,title:"Apache ECharts VP",name:"羡辙",topic:"Dirty-rectangle Rendering with Apache ECharts",time:"2021.8.6 14:10 GMT+8",isKeynote:!1,nameFontSize:1,topicFontSize:1,avatarDefaultPos:{width:0,height:0,top:0,left:0},avatarPos:{width:0,height:0,top:0,left:0},avatarZoom:1,isMouseDown:!1,mouseX:0,mouseY:0,isDownloading:!1,posterBase64:"",lang:"zh"}},mounted:function(){},methods:{download:function(){var t=this;this.isDownloading=!0,l.a.toJpeg(document.getElementById("poster-preview")).then((function(e){t.posterBase64=e,t.isDownloading=!1;var link=document.createElement("a");link.href=e,link.download=t.name+".jpeg",link.click()}))},handleAvatarSuccess:function(t,e){var n=this;this.imageUrl=URL.createObjectURL(e.raw);var img=new Image;img.onload=function(){var t=41700/2208,e=t/img.height*img.width,o=(56.25-e)/2;n.avatarDefaultPos.width=n.avatarPos.width=e,n.avatarDefaultPos.height=n.avatarPos.height=t,n.avatarDefaultPos.left=n.avatarPos.left=o,n.avatarDefaultPos.top=n.avatarPos.top=373/2208*100},img.src=this.imageUrl},mouseDown:function(t){this.imageUrl&&(this.isMouseDown=!0,this.mouseX=t.pageX,this.mouseY=t.pageY)},mouseMove:function(t){if(this.isMouseDown){var e=100/window.innerHeight;this.avatarPos.left+=(t.pageX-this.mouseX)*e,this.avatarPos.top+=(t.pageY-this.mouseY)*e,this.mouseX=t.pageX,this.mouseY=t.pageY}},mouseUp:function(t){this.isMouseDown=!1},zoomIn:function(){this.avatarZoom+=.05,this.avatarPos.width=this.avatarDefaultPos.width*this.avatarZoom,this.avatarPos.height=this.avatarDefaultPos.height*this.avatarZoom},zoomOut:function(){this.avatarZoom-=.05,this.avatarPos.width=this.avatarDefaultPos.width*this.avatarZoom,this.avatarPos.height=this.avatarDefaultPos.height*this.avatarZoom},zoomReset:function(){this.avatarZoom=1,this.avatarPos.width=this.avatarDefaultPos.width,this.avatarPos.height=this.avatarDefaultPos.height,this.avatarPos.left=this.avatarDefaultPos.left,this.avatarPos.top=this.avatarDefaultPos.top}}}),f=(n(334),n(49)),component=Object(f.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"poster-container",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:12}},[n("div",{style:{cursor:t.imageUrl?"move":"default"},attrs:{id:"poster-preview"},on:{mousedown:function(e){return t.mouseDown(e)},mousemove:function(e){return t.mouseMove(e)},mouseup:function(e){return t.mouseUp(e)}}},[t.imageUrl?n("img",{ref:"avatar",staticClass:"author-img",style:{width:t.avatarPos.width+"vh",height:t.avatarPos.height+"vh",left:t.avatarPos.left+"vh",top:t.avatarPos.top+"vh"},attrs:{src:t.imageUrl}}):t._e(),t._v(" "),n("img",{staticClass:"poster-template",attrs:{src:"poster-template-"+t.lang+".png"}}),t._v(" "),n("div",{staticClass:"poster-content"},[n("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"name",style:{"font-size":3.7*t.nameFontSize+"vh"}},[t._v(t._s(t.name))]),t._v(" "),n("div",{staticClass:"topic",style:{"font-size":2.3*t.topicFontSize+"vh"}},[t._v(t._s(t.topic))]),t._v(" "),n("div",{staticClass:"time"},[t._v(t._s(t.time))]),t._v(" "),t.isKeynote?n("img",{staticClass:"keynote",attrs:{src:"keynote-"+t.lang+".png"}}):t._e()])])]),t._v(" "),n("el-col",{staticClass:"poster-control",attrs:{span:8}},[n("el-row",[n("h1",[t._v("ApacheCon Asia 2021 海报生成器")]),t._v(" "),n("el-radio-group",{attrs:{size:"small"},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}},[n("el-radio-button",{attrs:{label:"zh"}}),t._v(" "),n("el-radio-button",{attrs:{label:"en"}})],1)],1),t._v(" "),n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.isDownloading,expression:"isDownloading"}],attrs:{"element-loading-text":"生成海报中"}},[n("el-form-item",{attrs:{label:"讲师姓名"}},[n("el-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"讲师职位"}},[n("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"头像"}},[n("el-col",{attrs:{span:3}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[n("i",{staticClass:"el-icon-plus avatar-icon"})])],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.zoomIn()}}},[t.imageUrl?n("i",{staticClass:"el-icon-zoom-in avatar-icon"}):t._e()]),t._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.zoomOut()}}},[t.imageUrl?n("i",{staticClass:"el-icon-zoom-out avatar-icon"}):t._e()]),t._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.zoomReset()}}},[t.imageUrl?n("i",{staticClass:"el-icon-refresh-left avatar-icon"}):t._e()])])],1),t._v(" "),n("el-form-item",{attrs:{label:"演讲题目"}},[n("el-checkbox",{model:{value:t.isKeynote,callback:function(e){t.isKeynote=e},expression:"isKeynote"}},[t._v("主题演讲")]),t._v(" "),n("el-input",{model:{value:t.topic,callback:function(e){t.topic=e},expression:"topic"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"演讲时间"}},[n("el-input",{model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"字号调整（讲师姓名）"}},[n("el-input-number",{attrs:{size:"medium",min:.5,max:2,step:.1,label:"倍率"},model:{value:t.nameFontSize,callback:function(e){t.nameFontSize=e},expression:"nameFontSize"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"字号调整（演讲题目）"}},[n("el-input-number",{attrs:{size:"medium",min:.5,max:2,step:.1,label:"倍率"},model:{value:t.topicFontSize,callback:function(e){t.topicFontSize=e},expression:"topicFontSize"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.download()}}},[t._v("\n          生成海报\n        ")])],1),t._v(" "),n("el-form-item",{staticClass:"info"},[n("i",{staticClass:"el-icon-service"}),t._v(" 本工具由 "),n("a",{attrs:{href:"http://github.com/Ovilia"}},[t._v("@Ovilia")]),t._v(" 开发，"),n("a",{attrs:{href:"mailto:oviliazhang@gmail.com"}},[t._v("问题反馈")])])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);